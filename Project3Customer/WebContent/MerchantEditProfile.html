<!DOCTYPE html>
<html>
<head>
<!-- æ° Bootstrap æ ¸å¿ CSS æä»¶ -->
<link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap.min.css">

<!-- å¯éçBootstrapä¸»é¢æä»¶ï¼ä¸è¬ä¸ç¨å¼å¥ï¼ -->
<link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap-theme.min.css">
<!-- 
<link rel="stylesheet" href="css/style.css">
 -->
<!-- jQueryæä»¶ãå¡å¿å¨bootstrap.min.js ä¹åå¼å¥ -->
<script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>

<!-- ææ°ç Bootstrap æ ¸å¿ JavaScript æä»¶ -->
<script src="http://cdn.bootcss.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>

<meta name="viewport" content="width=device-width, initial-scale=1" />
<!--[if lte IE 8]><script src="js/ie/html5shiv.js"></script><![endif]-->
<link rel="stylesheet" href="css/main.css" />
<!--[if lte IE 9]><link rel="stylesheet" href="css/ie9.css" /><![endif]-->

<meta charset="UTF-8">
<title>Merchant Edit Profile</title>
<style>
    body{
  padding:20px 20px;
}

.results tr[visible='false'],
.no-result{
  display:none;
}

.results tr[visible='true']{
  display:table-row;
}

.counter{
  padding:8px; 
  color:#ccc;
}

    #addDish{
        margin-top: 10px;
        margin-bottom: 20px;
    }
    
</style>
<script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>
</head>
<body>
<nav class="navbar navbar-default">
 <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">Menu</a>
      
       <ul class="nav navbar-nav">
        <li class="active"><a href="MerchantEditProfile.html">Edit Profile <span class="sr-only">(current)</span></a></li>
        <li class="active"><a href="ShowDish.html">Dishes Management <span class="sr-only">(current)</span></a></li>
         <li class="active"><a href="ShowOrder.html">View Customer Order <span class="sr-only">(current)</span></a></li>
           <li class="active" id="apply"><a href="merchant/applyAds">Apply Ads <span class="sr-only">(current)</span></a></li>
            <li class="active" ><a href="merchant/logout">Logout <span class="sr-only">(current)</span></a></li>
         
          <li><a href="#">You have successfully login as a Merchant!</a></li>
     </ul>
    </div>
</nav>

<section id="banner">
				<div class="inner split">
					<section>
						<h2>Merchant Edit Profile</h2>
					</section>
					<section>
						<p>Do you feel that the number of client is not enough? Don't worry! COMEBUYFOOD can save your life!!!More than 100000+ customers are preparing for buying your dishes!</p>
					</section>
				</div>
			</section>

	<hr/>
	
	<form action="merchant/loadMerchant" method="post">
		Merchant Name:<br>
		<input id="merchantName" name="merchantName" /><br />
		Shop Name:<br>
		<input id="shopName" name="shopName"><br />
		Tel. Number:<br>
		<input id="telNum" name="telNum"><br />
		Shop Picture URL:<br>
		<input id="shopPic" name="shopPic"><br />
		Category:<br>
		<input id="category" name="category"><br />
		Opening Hour(Integer):<br>
		<input id="openingHour" name="openingHour"><br />
		<input id="gender" type="hidden" name="openingHour"><br />
		Closing Hour(Integer):<br>
		<input id="closingHour" name="closingHour"><br />
		Can Pre Order(Boolean):<br>
		<input id="canPreOrder" name="canPreOrder"><br />
		Address:<br>
		<input id="address1" name="address1"><br />
		Region:<br>
		<input id="region1" name="region1"><br />
		
	</form>
	
	<button id="update" class="button special">Update</button>	
	<div id="result"></div>
	
	<script>
        
           $("#apply").on("click",function(e){
            e.preventDefault();
             $.ajax({
                                                                                                type:'POST',
                                                                                                url:'merchant/applyAds'
                                                                                               
                                                                                            }).done(function(msg){
                                                                                             
                                                                                            });
            alert("Success");
        })
        
		$(function() {
			$.ajax({
				type:'POST',
				url:'merchant/loadMerchant'
				
			})
			.done(function(msg){
				console.log(msg);
				$("#merchantName").val(msg.merchantName);
				$("#shopName").val(msg.shopName);
				$("#telNum").val(msg.telNum);
				$("#shopPic").val(msg.shopPic);
				$("#category").val(msg.category);
				$("#openingHour").val(msg.openingHour);
				$("#closingHour").val(msg.closingHour);
				$("#canPreOrder").val(msg.canPreOrder);
				$("#address1").val(msg.address.address);
				$("#region1").val(msg.address.region);
				
			});
			
			$("#update").on("click", function(e){
                $.ajax({
                	
                    type:'POST',
                    url:'merchant/updateMerchant',
                    data: {
                    	
                    	merchantName: $('#merchantName').val(),                        
                    	shopName: $('#shopName').val(),
                    	telNum: $('#telNum').val(),
                    	shopPic: $('#shopPic').val(),
                    	category: $('#category').val(),
                    	openingHour: $('#openingHour').val(),
                    	closingHour: $('#closingHour').val(),
                    	canPreOrder: $('#canPreOrder').val() === 'true',
                    	gender: $('#gender').val()  === 'true',
                    	address1: $("#address1").val(),
                    	region1: $("#region1").val(),
                    	
                    }
                }).done(function(msg){
                    $('#result').append("<p>" +"Updated successfully" + "</p>");
                });
            });
		});
	</script>
</body>
</html>