<!DOCTYPE html>
<html>
<head>
<!-- æ° Bootstrap æ ¸å¿ CSS æä»¶ -->
<link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap.min.css">

<!-- å¯éçBootstrapä¸»é¢æä»¶ï¼ä¸è¬ä¸ç¨å¼å¥ï¼ -->
<link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap-theme.min.css">
<!-- 
<link rel="stylesheet" href="css/style.css">
 -->
<!-- jQueryæä»¶ãå¡å¿å¨bootstrap.min.js ä¹åå¼å¥ -->
<script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>

<!-- ææ°ç Bootstrap æ ¸å¿ JavaScript æä»¶ -->
<script src="http://cdn.bootcss.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>

<meta charset="UTF-8">
<title>Merchant Edit Profile</title>
<style>
    body{
  padding:20px 20px;
}

.results tr[visible='false'],
.no-result{
  display:none;
}

.results tr[visible='true']{
  display:table-row;
}

.counter{
  padding:8px; 
  color:#ccc;
}

    #addDish{
        margin-top: 10px;
        margin-bottom: 20px;
    }
    
</style>
<script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>
</head>
<body>
<nav class="navbar navbar-default">
 <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">Menu</a>
      
       <ul class="nav navbar-nav">
        <li class="active"><a href="MerchantEditProfile.html">Edit Profile <span class="sr-only">(current)</span></a></li>
        <li class="active"><a href="ShowDish.html">Dishes Management <span class="sr-only">(current)</span></a></li>
         <li class="active"><a href="#">View Customer Order <span class="sr-only">(current)</span></a></li>
          <li><a href="#">You have successfully login as a Merchant!</a></li>
     </ul>
    </div>
</nav>
	<div><h2>Merchant Edit Profile</h2></div>
	<hr/>
	
	<form action="merchant/loadMerchant" method="post">
		Merchant Name:<br>
		<input id="merchantName" name="merchantName" /><br />
		Shop Name:<br>
		<input id="shopName" name="shopName"><br />
		Tel. Number:<br>
		<input id="telNum" name="telNum"><br />
		Shop Picture URL:<br>
		<input id="shopPic" name="shopPic"><br />
		Category:<br>
		<input id="category" name="category"><br />
		Opening Hour(Integer):<br>
		<input id="openingHour" name="openingHour"><br />
		<input id="gender" type="hidden" name="openingHour"><br />
		Closing Hour(Integer):<br>
		<input id="closingHour" name="closingHour"><br />
		Can Pre Order(Boolean):<br>
		<input id="canPreOrder" name="canPreOrder"><br />
		Address:<br>
		<input type="text" id="address1" name="address1"><br />
		Region:<br>
		<input type="text" id="region1" name="region1"><br />
		
	</form>
	
	<button id="update">Update</button>	
	<div id="result"></div>
	
	<script>
		$(function() {
			$.ajax({
				type:'POST',
				url:'merchant/loadMerchant',
				data: {
					merchantId: "4028b88157fffa970157fffa9b510000"
				}
			})
			.done(function(msg){
				$("#merchantName").val(msg.merchantName);
				$("#shopName").val(msg.shopName);
				$("#telNum").val(msg.telNum);
				$("#shopPic").val(msg.shopPic);
				$("#category").val(msg.category);
				$("#openingHour").val(msg.openingHour);
				$("#closingHour").val(msg.closingHour);
				$("#canPreOrder").val(msg.canPreOrder);
				$("#address1").val(msg.address.address);
				$("#region1").val(msg.address.region);
				
			});
			
			$("#update").on("click", function(e){
                $.ajax({
                	
                    type:'POST',
                    url:'merchant/updateMerchant',
                    data: {
                    	id: "4028b88157fffa970157fffa9b510000",
                    	merchantName: $('#merchantName').val(),                        
                    	shopName: $('#shopName').val(),
                    	telNum: $('#telNum').val(),
                    	shopPic: $('#shopPic').val(),
                    	category: $('#category').val(),
                    	openingHour: $('#openingHour').val(),
                    	closingHour: $('#closingHour').val(),
                    	canPreOrder: $('#canPreOrder').val() === 'true',
                    	gender: $('#gender').val()  === 'true',
                    	address1: $("#address1").val(),
                    	region1: $("#region1").val(),
                    	
                    }
                }).done(function(msg){
                    $('#result').append("<p>" +"Updated successfully" + "</p>");
                });
            });
		});
	</script>
</body>
</html>